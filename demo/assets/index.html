<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>Dante2</title>
  </head>
  <body>

    <div id="header">
      <div class="logo">
        <div class="menu-buttons">
          <a class="menu-button" target="_blank" href="https://michelson.github.io/dante2/doc.html">
            Documentation
          </a>

          <a class="menu-button" target="_blank" href="https://michelson.github.io/dante2/license.html">
            License
          </a>
        </div>


        <img src=<%= require('images/site/dante-editor-logo.png') %> alt="dante editor" height="21">
        <span>Dante Editor - 0.3.6 </span>

      </div>

      <a class="github tooltip-left" data-tooltip="Fork me on github" target="_blank" href="https://github.com/michelson/dante2">
        <img src=<%= require('images/site/github-logo.png') %> alt="Fork me on github" height="28">
      </a>
    </div>

    <div class="danteArticle"></div>
    <div id="app"></div>
    <!-- Sorry for editing :-) -->
    <div class="content">
      <article class="postArticle">
        <div class="postContent">
          <div class="notesSource">
            <div class="editor" class="postField postField--body">
              <section class="section--first section--last">
                <div class="section-divider layoutSingleColumn">
                  <hr class="section-divider" />
                </div>
                <div class="section-content">
                  <div id="richEditor" class="richEditor section-inner layoutSingleColumn"></div>
                </div>
              </section>
            </div>
          </div>
        </div>
      </article>
    </div>

    <script type="text/javascript">
      var div = document.getElementById('richEditor');
      document.addEventListener('DOMContentLoaded', function(){
        editor = new Dante(
          {
            api_key: "86c28a410a104c8bb58848733c82f840",
            el: "app",
            content: window.PocData,
            debug: true,
            data_storage: {
              url: "http://localhost:3333/store.json",
              save_handler: function(ctx, content){
                console.log("SAVING DATA!!");
                console.info({
                  editor_content: JSON.stringify(content),
                  text_content: ctx.getTextFromEditor(content)
                });
                console.log(editor.emitHTML2(content));
                div.innerHTML = editor.emitHTML2(content);
              },
            }
          }
        )
        editor.render()
      })
    </script>
  </body>
</html>
